<!DOCTYPE html>
<html lang="hi">
<!DOCTYPE html>
<html lang="hi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>CareerShala - Alohomora Foundation</title>
        <!-- <link href="{{ url_for('static', filename='css/tailwind-output.css') }}" rel="stylesheet"> -->

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Hind:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" />
        <script src="https://cdn.tailwindcss.com/3.4.16"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        colors: {
                            primary: "#f7a90b",
                            secondary: "#f9f6ee",
                            accent1: "#eef8eb",
                            accent2: "#6C63FF",
                            accent3: "#8c6a51",
                            accent4: "#9C2A2B",
                        },
                        borderRadius: {
                            none: "0px",
                            sm: "4px",
                            DEFAULT: "8px",
                            md: "12px",
                            lg: "16px",
                            xl: "20px",
                            "2xl": "24px",
                            "3xl": "32px",
                            full: "9999px",
                            button: "8px",
                        },
                    },
                },
            };
        </script>
        <style>
            :where([class^="ri-"])::before { content: "\f3c2"; }
            body {
                font-family: 'Hind', 'Poppins', sans-serif;
            }
            .hero-section {
                /* background-image: linear-gradient(to right, rgba(255, 255, 255, 0.9) 40%, rgba(255, 255, 255, 0.7) 60%, rgba(255, 255, 255, 0.4) 80%, rgba(255, 255, 255, 0) 100%); */
                background-size: cover;
                background-position: center right;
                will-change: auto !important;
                transform: none !important;
                overflow: visible !important;
                /* background-image: url('static/image.png') !important;*/
                background-color: #eef8eb !important;
            }
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            .state-card {
                animation: fadeInUp 0.6s ease-out forwards;
                opacity: 0;
            }
            .state-card:nth-child(1) { animation-delay: 0.2s; }
            .state-card:nth-child(2) { animation-delay: 0.4s; }
            .state-card:nth-child(3) { animation-delay: 0.6s; }
            .card-hover-effect {
                position: relative;
                overflow: hidden;
            }
            .card-hover-effect::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border: 2px solid transparent;
                border-radius: inherit;
                pointer-events: none;
                transition: all 0.3s ease;
            }
            .card-hover-effect:hover::before {
                border-color: #3B82F6;
                animation: borderAnimation 1.5s linear infinite;
            }
            
            @keyframes borderAnimation {
                0% { clip-path: inset(0 0 95% 0); }
                25% { clip-path: inset(0 95% 0 0); }
                50% { clip-path: inset(95% 0 0 0); }
                75% { clip-path: inset(0 0 0 95%); }
                100% { clip-path: inset(0 0 95% 0); }
            }
            
            .counter-value {
                counter-reset: count 0;
                animation: count-up 2s forwards;
            }
            
            @keyframes count-up {
                from { content: "0"; }
                to { content: attr(data-count); }
            }
            
            @keyframes float {
                0% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
                100% { transform: translateY(0px); }
            }
            
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
            .typewriter-box span {
                opacity: 0;
                display: inline-block;
                transform: translateY(10px);
            }

            .typewriter-box.animate span {
                animation: typewriter-reveal 0.5s forwards;
            }

            .typewriter-box.animate span:nth-child(1) { animation-delay: 0s; }
            .typewriter-box.animate span:nth-child(2) { animation-delay: 0.5s; }
            .typewriter-box.animate span:nth-child(3) { animation-delay: 1s; }
            .typewriter-box.animate span:nth-child(4) { animation-delay: 1.5s; }
            .typewriter-box.animate span:nth-child(5) { animation-delay: 2s; }

            @keyframes typewriter-reveal {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }



            html {
            scroll-behavior: smooth;
            }

            .float-animation {
                animation: float 3s ease-in-out infinite;
            }
            
            .pulse-animation {
                animation: pulse 2s ease-in-out infinite;
            }
            
            .gradient-bg {
                background: linear-gradient(135deg, #FF6B35 0%, #2EC4B6 100%);
            }
            .flex-row {
            scroll-snap-type: x mandatory;
            }
            .container {
            overflow-x: visible;
            }
            .snap-start {
            scroll-snap-align: start;
            }
            .category-row {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            padding: 1rem;
            gap: 1rem;
        }
        .sector-card {
            flex: 0 0 auto;
            width: 140px;
            text-align: center;
            background: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .sector-card img {
            width: 100%;
            height: 100px;
            object-fit: contain;
            border-radius: 6px;
        }
        .category-title {
            font-weight: bold;
            font-size: 1.2rem;
            margin: 0 0 5px 0;
        }
        .colored-bg-0 { background-color: #dff4f3; }
        .colored-bg-1 { background-color: #fef3db; }
        .colored-bg-2 { background-color: #f6e3ff; }
        .colored-bg-3 { background-color: #e3f1ff; }
        .colored-bg-4 { background-color: #fde2e2; }

        </style>
</head>
<body>
    {% include 'header.html' %}

    <!-- All Sectors (Hidden initially) -->
    <section class="py-16 bg-gray-50 " id="sectors">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h1 class="text-3xl font-bold">करियर क्षेत्र की दुनिया</h1>
                <p class="text-sm mt-2 text-gray-700">अपने रुचि के क्षेत्र पर क्लिक करें और जानें उससे जुड़े करियर की पूरी जानकारी लें </p>
            </div>
            
            <div id="sectors-container" >
                <!-- Categories will be dynamically loaded here -->
            </div>
        </div>
    </section>


    {% include 'footer.html' %}
    <!-- Custom JS -->
    <script >
    let allSectorsData = {};
    let sectorsLoaded = false;

    // Global error handlers
    window.addEventListener('unhandledrejection', function(event) {
        console.error('Unhandled promise rejection:', event.reason);
        event.preventDefault();
    });

    window.addEventListener('error', function(event) {
        console.error('JavaScript error:', event.error);
    });

    // Smooth scroll to sections
    function scrollToSectors() {
        document.getElementById('featured').scrollIntoView({ 
            behavior: 'smooth' 
        });
    }
    

// Render all sectors organized by categories
function renderAllSectors() {
    console.log(1)
    const container = document.getElementById('sectors-container');
    
    if (!container) {
        console.error('sectors-container not found');
        return;
    }
    
    if (!allSectorsData || typeof allSectorsData !== 'object') {
        console.error('Invalid sectors data:', allSectorsData);
        container.innerHTML = '<p class="text-center text-gray-600">Error loading sectors data</p>';
        return;
    }
    
    container.innerHTML = '';
    // Category color mapping with Tailwind classes
    const categoryColors = {
    'Art': 'bg-green-100',
    'Skill': 'bg-blue-100',
    'Traditional': 'bg-red-100',
    'Non_traditional': 'bg-yellow-100',
    'Academic': 'bg-purple-100'
    };
    console.log(allSectorsData)
    
    // Create rows for each category
    Object.entries(allSectorsData).forEach(([category, sectors]) => {
        if (!Array.isArray(sectors) || sectors.length === 0) {
            console.warn(`No sectors found for category: ${category}`);
            return;
        }
        
        const categoryRow = document.createElement('div');
        categoryRow.className = `mb-12 px-4 py-6 rounded-lg ${categoryColors[category] || 'bg-gray-100'}`; // background applies here

        
        
        // Horizontal scrolling container
        const scrollContainer = document.createElement('div');
        scrollContainer.className = 'flex gap-6 overflow-x-auto pb-4 px-4 scroll-smooth horizontal-scroll';
        scrollContainer.style.cssText = 'scrollbar-width: none; -ms-overflow-style: none;';
        scrollContainer.style.setProperty('scrollbar-width', 'none');
        
        scrollContainer.classList.add('flex', 'flex-row');

        
        // Create sector cards
        sectors.forEach(sector => {
            if (sector && sector.id && sector.name) {
                const sectorCard = createSectorCard(sector, category, true);
                scrollContainer.appendChild(sectorCard);
            } else {
                console.warn('Invalid sector data:', sector);
            }
        });
        
        // categoryRow.appendChild(categoryTitle);
        categoryRow.appendChild(scrollContainer);
        container.appendChild(categoryRow);
    });
    
}

function createSectorCard(sector, category, isHorizontal = false) {
    if (!sector || !sector.id || !sector.name) {
        console.error('Invalid sector data for card creation:', sector);
        return document.createElement('div');
    }
    console.log(sector.icon)
    const cardDiv = document.createElement('div');
    cardDiv.className = isHorizontal ? 'flex-none w-44 h-44 md:w-56 md:h-56' : 'w-full h-40';
    
    const sectorIcon = sector.icon || 'static/media/sectors/default.png';
    const sectorName = sector.name || 'Unknown Sector';
    const sectorId = sector.id || '';
    
    const cardHTML = `
        <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow cursor-pointer border border-gray-100 h-full flex flex-col justify-center items-center p-4" onclick="window.location.href='/sector/${sectorId}'">
            <div class="mb-3">
                <img src="${sectorIcon}" alt="${sectorName}" class="w-24 h-24 md:w-36 md:h-36 object-contain" 
                     onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiByeD0iOCIgZmlsbD0iIzM0MzQzNCIvPgo8cGF0aCBkPSJNNDAgMjBWNjBNMjAgNDBINjAiIHN0cm9rZT0iIzY2NjY2NiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHN2Zz4K'">
            </div>
            <h5 class="text-sm md:text-base font-bold text-gray-800 text-center leading-tight">${sectorName}</h5>
        </div>
    `;
    
    cardDiv.innerHTML = cardHTML;
    return cardDiv;
}

// Add horizontal scroll functionality with mouse wheel
document.addEventListener('DOMContentLoaded', function() {
    // Add smooth scrolling for horizontal containers
    document.addEventListener('wheel', function(e) {
        const hoveredElement = document.elementFromPoint(e.clientX, e.clientY);
        const scrollContainer = hoveredElement?.closest('.horizontal-scroll');
        
        if (scrollContainer) {
            e.preventDefault();
            scrollContainer.scrollLeft += e.deltaY;
        }
    });
    
    // Add touch/drag scrolling for mobile
    let isDown = false;
    let startX;
    let scrollLeft;
    
    document.addEventListener('mousedown', function(e) {
        const scrollContainer = e.target.closest('.horizontal-scroll');
        if (scrollContainer) {
            isDown = true;
            startX = e.pageX - scrollContainer.offsetLeft;
            scrollLeft = scrollContainer.scrollLeft;
            scrollContainer.style.cursor = 'grabbing';
        }
    });
    
    document.addEventListener('mouseleave', function() {
        isDown = false;
        document.querySelectorAll('.horizontal-scroll').forEach(container => {
            container.style.cursor = 'grab';
        });
    });
    
    document.addEventListener('mouseup', function() {
        isDown = false;
        document.querySelectorAll('.horizontal-scroll').forEach(container => {
            container.style.cursor = 'grab';
        });
    });
    
    document.addEventListener('mousemove', function(e) {
        if (!isDown) return;
        const scrollContainer = e.target.closest('.horizontal-scroll');
        if (scrollContainer) {
            e.preventDefault();
            const x = e.pageX - scrollContainer.offsetLeft;
            const walk = (x - startX) * 2;
            scrollContainer.scrollLeft = scrollLeft - walk;
        }
    });
    
});
document.addEventListener('DOMContentLoaded', async function() {
    try {
        const response = await fetch('/api/sectors');
        if (!response.ok) {
            throw new Error('Failed to fetch sector data');
        }
        allSectorsData = await response.json();
        renderAllSectors();
    } catch (err) {
        console.error('Error loading sector data:', err);
        const container = document.getElementById('sectors-container');
        if (container) {
            container.innerHTML = '<p class="text-center text-red-500">Failed to load sectors</p>';
        }
    }
});
document.addEventListener('DOMContentLoaded', function() {
    renderAllSectors();
});
</script>
</body>
</html>